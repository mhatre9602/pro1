<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container">
      <label for="amount" class="form-label">Amount</label>
      <input type="text" class="form-control" id="amount" />
      <label for="desc" class="form-label">Choose Description</label>
      <input type="text" class="form-control" id="desc" />
      <label for="category" class="form-label">Choose Category</label>
      <select name="category" id="categorySelect">
        <option value="Entertainment">Entertainment</option>
        <option value="Food">Food</option>
        <option value="Travelling">Travelling</option>
      </select>
      <div id="addBtn">
        <input
          type="submit"
          class="btn btn-primary"
          value="Add Expense"
          onclick="return addExpense()"
        />
      </div>
    </div>
    <script>
      function addExpense() {
        let parentElement = document.getElementById("addBtn");
        let expAmount = document.getElementById("amount").value;
        let expDesc = document.getElementById("desc").value;
        let expCategory = document.getElementById("categorySelect").value;
        // console.log(parentElement);
        // console.log(expAmount);
        // console.log(expDesc);

        let obj = { expAmount, expDesc, expCategory };
        localStorage.setItem(obj.expAmount, JSON.stringify(obj));

        let childElement = document.createElement("p");
        childElement.textContent =
          expAmount + " for " + expDesc + " under " + expCategory;

        // console.log(childElement.textContent);
        //Delete button
        let deleteButton = document.createElement("input");
        deleteButton.type = "button";
        deleteButton.value = "Delete Expense";

        deleteButton.onclick = () => {
          localStorage.removeItem(obj.expAmount);
          parentElement.removeChild(childElement);
        };

        //Edit button
        let editButton = document.createElement("input");
        editButton.type = "button";
        editButton.value = "Edit expense";

        //edit button function
        editButton.onclick = () => {
          document.getElementById("amount").value = obj.expAmount;
          document.getElementById("desc").value = obj.expDesc;
          document.getElementById("categorySelect").value = obj.expCategory;
          localStorage.removeItem(obj.expAmount);
          parentElement.removeChild(childElement);
        };

        childElement.appendChild(deleteButton);
        childElement.appendChild(editButton);
        parentElement.appendChild(childElement);
        return false;
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
